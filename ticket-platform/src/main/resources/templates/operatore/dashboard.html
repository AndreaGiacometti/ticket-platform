<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard Operatore</title>
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css"
	rel="stylesheet">
<link
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
	rel="stylesheet">
</head>
<body>
	<div class="container mt-4">
		<h1 class="mb-4">Dashboard Operatore</h1>
		<div class="container mt-5">
			<div class="row">
				<div class="col-md-6 mb-4">
					<div class="card">
						<div class="card-header bg-secondary text-white">
							<h5 class="mb-0">Nome</h5>
						</div>
						<div class="card-body text-center">
							<span th:text="${#authentication.principal.nome}"></span>
						</div>
					</div>
				</div>
				<div class="col-md-6 mb-4">
					<div class="card">
						<div class="card-header bg-secondary text-white">
							<h5 class="mb-0">Cognome</h5>
						</div>
						<div class="card-body text-center">
							<span th:text="${#authentication.principal.cognome}"></span>
						</div>
					</div>
				</div>
				<div class="col-md-6 mb-4">
					<div class="card h-100">
						<div class="card-header bg-secondary text-white">
							<h5 class="mb-0">Email</h5>
						</div>
						<div class="card-body text-center">
							<span th:text="${#authentication.principal.email}"></span>
						</div>
					</div>
				</div>
				<div class="col-md-6 mb-4">
					<div class="card h-100">
						<div class="card-header bg-secondary text-white">
							<h5 class="mb-0">Stato Personale</h5>
						</div>
						<div class="mb-0">

							<div class="card-body text-center">
							<div class="mb-4"> Al momento sei <span th:text="${#authentication.principal.statoPersonale}"></span> </div>
								<form action="/operatore/updateStatus" method="post">
									<div class="form-group d-flex align-items-center">
										<select class="form-control me-2" name="statoPersonale">
											<option value="Attivo"
												th:selected="${#authentication.principal.statoPersonale == 'Attivo'}">Attivo</option>
											<option value="Non Attivo"
												th:selected="${#authentication.principal.statoPersonale == 'Non Attivo'}">Non
												Attivo</option>
										</select>
										<button type="submit" class="btn btn-primary mx-1">Aggiorna</button>
									</div>
								</form>
							</div>

						</div>
					</div>
				</div>



				<!-- Mostra la lista dei ticket -->
				<div class="card">
					<div class="card-header bg-primary text-white">
						<h5 class="mb-0">Lista Ticket</h5>
					</div>
					<div class="card-body">
						<div class="table-responsive">
							<table class="table table-striped table-bordered">
								<thead class="table-dark">
									<tr>
										<th>Titolo</th>
										<th>Descrizione</th>
										<th>Stato</th>
										<th>Visualizza Dettaglio Ticket</th>
										<th>Aggiungi Nota</th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="ticket : ${tickets}">
										<td th:text="${ticket.titolo}"></td>
										<td th:text="${ticket.descrizione}"></td>
										<td th:text="${ticket.stato}"></td>
										<td><a th:href="@{/ticket/{id}(id=${ticket.id})}"
											class="btn btn-info btn-sm"
											title="Visualizza Dettaglio Ticket"> <i class="bi bi-eye"></i>
										</a></td>
										<td><a
											th:href="@{/note/ticket/{ticketId}(ticketId=${ticket.id})}"
											class="btn btn-secondary btn-sm"
											title="Visualizza o Aggiungi Nota"> <i
												class="bi bi-file-earmark-plus"></i>
										</a></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>

			<script
				src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
			<script
				src="https://maxcdn.bootstrapcdn.com/bootstrap/5.3.0/js/bootstrap.min.js"></script>
</body>
</html>

